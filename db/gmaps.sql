-- -----------------------------------------------------
-- 
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS gmaps;


-- -----------------------------------------------------
-- 
-- -----------------------------------------------------
USE gmaps;


-- -----------------------------------------------------
-- Table `neighborhoods`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `neighborhoods` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- 
-- -----------------------------------------------------
INSERT INTO neighborhoods (id, name) VALUES
(1, 'Tulum Hotel Zone'),
(2, 'Tulum Veleta'),
(3, 'Tulum Downtown'),
(4, 'Aldea Zamá'),
(5, 'Playa Downtown'),
(6, 'Colosio'),
(7, 'Coco Beach'),
(8, 'Zona Diamante'),
(9, 'Playacar'),
(10, 'Little Italy'),
(11, 'Valle Bambu'),
(12, 'Puerto Aventuras'),
(13, 'Hotel Zone'),
(14, 'Puerto Cancún'),
(15, 'Puerto Juárez'),
(16, 'Cancún City'),
(17, 'Akumal'),
(18, 'Puerto Morelos'),
(19, 'Chichen'),
(20, 'Mahahual');


-- -----------------------------------------------------
-- Table `neighborhoods_polygons`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `neighborhoods_polygons` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `center` POINT NOT NULL,
  `coordinates` POLYGON NOT NULL,
  `neighborhood_id` INT NOT NULL,
  PRIMARY KEY (`id`, `neighborhood_id`),
  INDEX `fk_neighborhoods_polygons_neighborhoods_idx` (`neighborhood_id` ASC),
  CONSTRAINT `fk_neighborhoods_polygons_neighborhoods`
    FOREIGN KEY (`neighborhood_id`)
    REFERENCES `neighborhoods` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- 
-- -----------------------------------------------------
INSERT INTO neighborhoods_polygons (center, coordinates, neighborhood_id) VALUES
(ST_GEOMFROMTEXT('POINT(20.1573 -87.44345)'), ST_GEOMFROMTEXT('POLYGON((20.1873 -87.44345, 20.15926 -87.45581, 20.13323 -87.46542, 20.13194 -87.46293, 20.18647 -87.44174, 20.1873 -87.44345))'), 1),
(ST_GEOMFROMTEXT('POINT(20.20856 -87.47134)'), ST_GEOMFROMTEXT('POLYGON((20.20856 -87.47134, 20.17151 -87.45297, 20.16402 -87.47681, 20.2053 -87.47941, 20.20856 -87.47134))'), 2),
(ST_GEOMFROMTEXT('POINT(20.21017 -87.45212)'), ST_GEOMFROMTEXT('POLYGON((20.21017 -87.45212, 20.20456 -87.46946, 20.20878 -87.47116, 20.2018 -87.49237, 20.20921 -87.49469, 20.21253 -87.48583, 20.21786 -87.48763, 20.22604 -87.45787, 20.21917 -87.44999, 20.21557 -87.4486, 20.21017 -87.45212))'), 3),
(ST_GEOMFROMTEXT('POINT(20.20711 -87.45083)'), ST_GEOMFROMTEXT('POLYGON((20.20711 -87.45083, 20.20188 -87.46788, 20.18802 -87.46121, 20.20051 -87.44851, 20.20711 -87.45083))'), 4),
(ST_GEOMFROMTEXT('POINT(20.6227 -87.08746)'), ST_GEOMFROMTEXT('POLYGON((20.6227 -87.08746, 20.62081 -87.0791, 20.62206 -87.07818, 20.62162 -87.07721, 20.62204 -87.07664, 20.62098 -87.07536, 20.62531 -87.07193, 20.62853 -87.06755, 20.63462 -87.07753, 20.6227 -87.08746))'), 5),
(ST_GEOMFROMTEXT('POINT(20.6425 -87.07197)'), ST_GEOMFROMTEXT('POLYGON((20.6425 -87.07197, 20.63837 -87.06523, 20.64005 -87.06395, 20.6367 -87.05832, 20.64314 -87.05571, 20.6477 -87.05195, 20.64768 -87.05002, 20.64736 -87.04744, 20.64949 -87.04601, 20.65349 -87.05216, 20.65929 -87.04772, 20.66104 -87.05036, 20.66098 -87.05122, 20.66389 -87.0556, 20.6425 -87.07197))'), 6),
(ST_GEOMFROMTEXT('POINT(20.64258 -87.07214)'), ST_GEOMFROMTEXT('POLYGON((20.64258 -87.07214, 20.63846 -87.06522, 20.64008 -87.06403, 20.63642 -87.05832, 20.63548 -87.0591, 20.63468 -87.06085, 20.63343 -87.06236, 20.63202 -87.06378, 20.63865 -87.07485, 20.64258 -87.07214))'), 7),
(ST_GEOMFROMTEXT('POINT(20.66399 -87.05566)'), ST_GEOMFROMTEXT('POLYGON((20.66399 -87.05566, 20.68222 -87.04219, 20.69196 -87.05718, 20.70622 -87.04515, 20.6893 -87.01832, 20.68246 -87.02056, 20.67533 -87.02099, 20.67409 -87.02111, 20.6737 -87.02206, 20.67158 -87.02386, 20.66204 -87.03192, 20.66034 -87.03437, 20.65861 -87.03691, 20.65612 -87.04013, 20.65543 -87.04034, 20.65379 -87.04185, 20.6509 -87.04549, 20.64969 -87.04627, 20.65359 -87.05215, 20.66399 -87.05566))'), 8),
(ST_GEOMFROMTEXT('POINT(20.62266 -87.08776)'), ST_GEOMFROMTEXT('POLYGON((20.62266 -87.08776, 20.62065 -87.07905, 20.6209 -87.07777, 20.62206 -87.07687, 20.62098 -87.07558, 20.61636 -87.07815, 20.61431 -87.0794, 20.61009 -87.08412, 20.59965 -87.09283, 20.61013 -87.10403, 20.62266 -87.08776))'), 9),
(ST_GEOMFROMTEXT('POINT(20.63499 -87.07789)'), ST_GEOMFROMTEXT('POLYGON((20.63499 -87.07789, 20.62843 -87.06765, 20.6309 -87.06463, 20.63197 -87.06412, 20.63865 -87.07492, 20.63499 -87.07789))'), 10),
(ST_GEOMFROMTEXT('POINT(20.61535 -87.09798)'), ST_GEOMFROMTEXT('POLYGON((20.61535 -87.09798, 20.61892 -87.10108, 20.61449 -87.10718, 20.62075 -87.11686, 20.63194 -87.10807, 20.62847 -87.10227, 20.61833 -87.09399, 20.61535 -87.09798))'), 11),
(ST_GEOMFROMTEXT('POINT(20.5096 -87.20896)'), ST_GEOMFROMTEXT('POLYGON((20.5096 -87.20896, 20.51431 -87.21569, 20.51088 -87.22123, 20.5196 -87.23003, 20.51362 -87.23805, 20.50478 -87.23154, 20.50253 -87.23589, 20.48347 -87.25591, 20.478 -87.24947, 20.5096 -87.20896))'), 12),
(ST_GEOMFROMTEXT('POINT(21.13062 -86.76693)'), ST_GEOMFROMTEXT('POLYGON((21.13062 -86.76693, 21.13735 -86.79268, 21.14598 -86.80331, 21.16023 -86.8023, 21.14439 -86.77689, 21.13991 -86.75045, 21.13494 -86.73846, 21.09059 -86.76693, 21.04997 -86.78122, 21.03612 -86.7786, 21.03067 -86.78169, 21.0338 -86.80079, 21.0217 -86.81293, 21.02491 -86.81911, 21.13062 -86.76693))'), 13),
(ST_GEOMFROMTEXT('POINT(21.17313 -86.81997)'), ST_GEOMFROMTEXT('POLYGON((21.17313 -86.81997, 21.1558 -86.82143, 21.15912 -86.80538, 21.15707 -86.79896, 21.17748 -86.80597, 21.17313 -86.81997))'), 14),
(ST_GEOMFROMTEXT('POINT(21.18289 -86.8107)'), ST_GEOMFROMTEXT('POLYGON((21.18289 -86.8107, 21.18179 -86.81175, 21.17625 -86.8107, 21.17673 -86.80676, 21.20238 -86.80401, 21.21208 -86.79981, 21.23478 -86.80023, 21.23466 -86.80517, 21.18289 -86.8107))'), 15),
(ST_GEOMFROMTEXT('POINT(21.12069 -86.83388)'), ST_GEOMFROMTEXT('POLYGON((21.08418 -86.87782, 21.13162 -86.83534, 21.13126 -86.88572, 21.17731 -86.91247, 21.20266 -86.85963, 21.19978 -86.81774, 21.14471 -86.82255, 21.12069 -86.83388, 21.06848 -86.84589, 21.08418 -86.87782))'), 16),
(ST_GEOMFROMTEXT('POINT(20.34221 -87.36028)'), ST_GEOMFROMTEXT('POLYGON((20.34221 -87.36028, 20.38807 -87.33697, 20.38414 -87.32809, 20.39856 -87.31985, 20.40157 -87.32529, 20.40343 -87.32432, 20.40026 -87.31887, 20.41743 -87.3093, 20.43296 -87.29806, 20.42967 -87.29033, 20.39484 -87.31084, 20.34237 -87.34174, 20.33808 -87.34831, 20.34221 -87.36028))'), 17);
